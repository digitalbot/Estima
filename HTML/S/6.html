<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>Estima/AudioDataHandle.h</title>
<meta name='robots' content='noindex,nofollow' />
<meta name='generator' content='GLOBAL-6.0' />
<meta http-equiv='Content-Style-Type' content='text/css' />
<link rel='stylesheet' type='text/css' href='../style.css' />
</head>
<body>
<a id='TOP' name='TOP' /><h2 class='header'><a href='../mains.html'>root</a>/<a href='../files/38.html'>Estima</a>/AudioDataHandle.h</h2>
<em class='comment'>/* [&lt;][&gt;]<a href='#L71'>[^]</a>[v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
<hr />
<h2 class='header'><a href='21.html#L12' title='Included from 12 in Estima/EstimaCalculator.h.'>INCLUDED FROM</a></h2>
<hr />
<h2 class='header'>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L71' title='Defined at 71.'>property</a></li>
</ol>
<hr />
<pre>
<a id='L1' name='L1' /><em class='comment'>//</em>
<a id='L2' name='L2' /><em class='comment'>//  AudioDataHandle.h</em>
<a id='L3' name='L3' /><em class='comment'>//  ClassTestProject</em>
<a id='L4' name='L4' /><em class='comment'>//</em>
<a id='L5' name='L5' /><em class='comment'>//  Created by kosuke nakamura on 11/12/18.</em>
<a id='L6' name='L6' /><em class='comment'>//  Copyright (c) 2011å¹´ kosuke. All rights reserved.</em>
<a id='L7' name='L7' /><em class='comment'>//</em>
<a id='L8' name='L8' />
<a id='L9' name='L9' /><em class='sharp'>#import</em> &lt;Foundation/Foundation.h&gt;
<a id='L10' name='L10' /><em class='sharp'>#import</em> "<a href='28.html'>Utils.h</a>"
<a id='L11' name='L11' /><em class='sharp'>#import</em> "string.h"
<a id='L12' name='L12' /><em class='sharp'>#import</em> "stdlib.h"
<a id='L13' name='L13' />
<a id='L14' name='L14' />
<a id='L15' name='L15' /><em class='sharp'>#define</em> PREPARE_SET(type, temp)                       \
<a id='L16' name='L16' />    returnDatas = <a href='../S/28.html#L12' title='Defined at 12 in Estima/Utils.h.'>MEM_CALLOC</a>(num, <strong class='reserved'>sizeof</strong>(type **));   \
<a id='L17' name='L17' />    type **temp = (type **)returnDatas;               \
<a id='L18' name='L18' />    temp[0] = (type *)firstData;                      \
<a id='L19' name='L19' />    <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> i=1; i&lt;num; i++) <em class='brace'>{</em>                       \
<a id='L20' name='L20' />        temp[i] = va_arg(argList, type *);            \
<a id='L21' name='L21' />    <em class='brace'>}</em>
<a id='L22' name='L22' /><em class='sharp'>#define</em> SET_DATA(type)                                         \
<a id='L23' name='L23' />    <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> i=0; i&lt;_numberOfChannels; i++) <em class='brace'>{</em>                  \
<a id='L24' name='L24' />        <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> j=0; j&lt;_numberOfSamples; j++) <em class='brace'>{</em>               \
<a id='L25' name='L25' />             _datas[i][j] = (<strong class='reserved'>double</strong>)((type **)inData)[i][j];   \
<a id='L26' name='L26' />        <em class='brace'>}</em>                                                      \
<a id='L27' name='L27' />    <em class='brace'>}</em>
<a id='L28' name='L28' /><em class='sharp'>#define</em> SET_DATA_FROM_FILE(type)                         \
<a id='L29' name='L29' />    <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> i=0; i&lt;_numberOfSamples; i++) <em class='brace'>{</em>             \
<a id='L30' name='L30' />        <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> j=0; j&lt;_numberOfChannels; j++) <em class='brace'>{</em>        \
<a id='L31' name='L31' />            fread(&amp;buf, bytesPerSample, 1 , pWavFile);   \
<a id='L32' name='L32' />            _datas[j][i] = (<strong class='reserved'>double</strong>)*(type *)&amp;buf;        \
<a id='L33' name='L33' />        <em class='brace'>}</em>                                                \
<a id='L34' name='L34' />    <em class='brace'>}</em>
<a id='L35' name='L35' /><em class='sharp'>#define</em> WRITE_WAVDATA(type, var)                          \
<a id='L36' name='L36' />    <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> i=0; i&lt;_numberOfSamples; i++) <em class='brace'>{</em>              \
<a id='L37' name='L37' />        <strong class='reserved'>for</strong> (<strong class='reserved'>int</strong> j=0; j&lt;_numberOfChannels; j++) <em class='brace'>{</em>         \
<a id='L38' name='L38' />            dataBuf = _datas[j][i] * limit;               \
<a id='L39' name='L39' />            type wData = (type)(dataBuf + var);           \
<a id='L40' name='L40' />            fwrite(&amp;wData, <strong class='reserved'>sizeof</strong>(wData), 1, pWavFile);   \
<a id='L41' name='L41' />        <em class='brace'>}</em>                                                 \
<a id='L42' name='L42' />    <em class='brace'>}</em>
<a id='L43' name='L43' />
<a id='L44' name='L44' /><strong class='reserved'>typedef</strong> <strong class='reserved'>enum</strong> <em class='brace'>{</em>
<a id='L45' name='L45' />    kIsChar   = 80,
<a id='L46' name='L46' />    kIsShort  = 160,
<a id='L47' name='L47' />    kIsInt    = 320,
<a id='L48' name='L48' />    kIsFloat  = 321,
<a id='L49' name='L49' />    kIsDouble = 640,
<a id='L50' name='L50' /><em class='brace'>}</em> <a href='../R/5.html' title='Multiple refered from 8 places.'>eDataTypes</a>;
<a id='L51' name='L51' />
<a id='L52' name='L52' />
<a id='L53' name='L53' /><em class='sharp'>#pragma</em> mark - Start basic
<a id='L54' name='L54' />
<a id='L55' name='L55' />@interface AudioDataHandle : NSObject <em class='brace'>{</em>
<a id='L56' name='L56' />
<a id='L57' name='L57' />@private
<a id='L58' name='L58' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> _numberOfChannels;
<a id='L59' name='L59' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> _bitsPerSample;
<a id='L60' name='L60' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   _samplesPerSec;
<a id='L61' name='L61' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   _numberOfSamples;
<a id='L62' name='L62' />    <strong class='reserved'>double</strong>         **_datas;
<a id='L63' name='L63' />    <a href='../D/11.html' title='Multiple defined in 2 places.'>eDataTypes</a>     _dataType;
<a id='L64' name='L64' />    
<a id='L65' name='L65' />    BOOL           _isData;
<a id='L66' name='L66' />    BOOL           _isWav;
<a id='L67' name='L67' />    BOOL           _isInternalized;
<a id='L68' name='L68' />    <strong class='reserved'>void</strong>           *_meta;
<a id='L69' name='L69' /><em class='brace'>}</em>
<a id='L70' name='L70' />
<a id='L71' name='L71' />@<a href='../R/16.html' title='Multiple refered from 68 places.'>property</a>(readonly) <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> numberOfChannels;
<a id='L72' name='L72' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> bitsPerSample;
<a id='L73' name='L73' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   samplesPerSec;
<a id='L74' name='L74' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   numberOfSamples;
<a id='L75' name='L75' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <a href='../D/11.html' title='Multiple defined in 2 places.'>eDataTypes</a>     dataType;
<a id='L76' name='L76' />
<a id='L77' name='L77' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   bytesPerSample;
<a id='L78' name='L78' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>double</strong>         bufTypeLimit;
<a id='L79' name='L79' />
<a id='L80' name='L80' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) BOOL           isData;
<a id='L81' name='L81' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) BOOL           isWav;
<a id='L82' name='L82' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) BOOL           isInternalized;
<a id='L83' name='L83' />@<a href='../S/6.html#L71' title='Defined at 71 in Estima/AudioDataHandle.h.'>property</a>(readonly) <strong class='reserved'>void</strong>           *meta;
<a id='L84' name='L84' />
<a id='L85' name='L85' /><em class='comment'>// flag</em>
<a id='L86' name='L86' />- (<strong class='reserved'>void</strong>)defineIsData;
<a id='L87' name='L87' />
<a id='L88' name='L88' /><em class='comment'>// class methods</em>
<a id='L89' name='L89' />+ (<strong class='reserved'>void</strong> **)prepareInitWithDatas:(<a href='../D/11.html' title='Multiple defined in 2 places.'>eDataTypes</a>)dataType
<a id='L90' name='L90' />                  numOfChannels:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)num
<a id='L91' name='L91' />                      firstData:(<strong class='reserved'>void</strong> *)firstData, ...;
<a id='L92' name='L92' />+ (<strong class='reserved'>void</strong>)finishInitWithDatas:(<strong class='reserved'>void</strong> **)initedDatas
<a id='L93' name='L93' />              numOfChannels:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)num;
<a id='L94' name='L94' />
<a id='L95' name='L95' /><em class='comment'>// initialize</em>
<a id='L96' name='L96' />- (id)initWithNumOfSamples:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)numOfSamples
<a id='L97' name='L97' />             numOfChannels:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)numOfChannels
<a id='L98' name='L98' />             samplesPerSec:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)samplesPerSec
<a id='L99' name='L99' />             bitsPerSample:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)bitsPerSample;
<a id='L100' name='L100' />- (id)initWithDatas:(<strong class='reserved'>void</strong> **)inData
<a id='L101' name='L101' />       numOfSamples:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)numOfSamples
<a id='L102' name='L102' />      numOfChannels:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)numOfChannels
<a id='L103' name='L103' />      samplesPerSec:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)samplesPerSec
<a id='L104' name='L104' />           dataType:(<a href='../D/11.html' title='Multiple defined in 2 places.'>eDataTypes</a>)dataType;
<a id='L105' name='L105' />
<a id='L106' name='L106' /><em class='comment'>// access</em>
<a id='L107' name='L107' />- (<strong class='reserved'>double</strong> *)dataWithChannel:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)ch;
<a id='L108' name='L108' />- (<strong class='reserved'>double</strong>)access:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)ch
<a id='L109' name='L109' />         atIndex:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)sampleNumber;
<a id='L110' name='L110' />- (<strong class='reserved'>void</strong>)access:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong>)ch
<a id='L111' name='L111' />       atIndex:(<strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>)sampleNumber
<a id='L112' name='L112' />       setData:(<strong class='reserved'>double</strong>)sData;
<a id='L113' name='L113' />
<a id='L114' name='L114' /><em class='comment'>// show property</em>
<a id='L115' name='L115' />- (<strong class='reserved'>void</strong>)dumpInfo:(NSString *)name;
<a id='L116' name='L116' />- (<strong class='reserved'>void</strong>)dumpDatas;
<a id='L117' name='L117' />
<a id='L118' name='L118' /><em class='comment'>// operate methods</em>
<a id='L119' name='L119' />- (<strong class='reserved'>void</strong>)internalize;
<a id='L120' name='L120' />- (<strong class='reserved'>void</strong>)unInternalize;
<a id='L121' name='L121' />
<a id='L122' name='L122' />@end
<a id='L123' name='L123' />
<a id='L124' name='L124' />
<a id='L125' name='L125' /><em class='sharp'>#pragma</em> mark - Category WavFileIO
<a id='L126' name='L126' />
<a id='L127' name='L127' /><em class='sharp'>#pragma</em> pack(push, 1)
<a id='L128' name='L128' /><strong class='reserved'>typedef</strong> <strong class='reserved'>struct</strong> <em class='brace'>{</em>
<a id='L129' name='L129' />    <strong class='reserved'>char</strong>           riffChunkID[4];
<a id='L130' name='L130' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   riffChunkSize;
<a id='L131' name='L131' />    <strong class='reserved'>char</strong>           riffFormatType[4];
<a id='L132' name='L132' />    
<a id='L133' name='L133' />    <strong class='reserved'>char</strong>           fmtChunkID[4];
<a id='L134' name='L134' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   fmtChunkSize;
<a id='L135' name='L135' />    
<a id='L136' name='L136' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> wFormatTag;
<a id='L137' name='L137' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> nChannels;
<a id='L138' name='L138' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   nSamplesPerSec;
<a id='L139' name='L139' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>int</strong>   nAvgBytesPerSec;
<a id='L140' name='L140' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> nBlockAlign;
<a id='L141' name='L141' />    <strong class='reserved'>unsigned</strong> <strong class='reserved'>short</strong> wBitsPerSample;
<a id='L142' name='L142' /><em class='brace'>}</em> sWavHeader;
<a id='L143' name='L143' /><em class='sharp'>#pragma</em> pop
<a id='L144' name='L144' />
<a id='L145' name='L145' />@interface AudioDataHandle (WavFileIO)
<a id='L146' name='L146' />- (<strong class='reserved'>void</strong>)defineIsWav;
<a id='L147' name='L147' />- (id)initWithWavFile:(NSString *)fFilePath;
<a id='L148' name='L148' />- (<strong class='reserved'>void</strong>)writeToWavFile:(NSString *)tFilePath;
<a id='L149' name='L149' />- (<strong class='reserved'>void</strong>)dumpHeader;
<a id='L150' name='L150' />@end
</pre>
<hr />
<a id='BOTTOM' name='BOTTOM' />
<em class='comment'>/* [&lt;][&gt;][^]<a href='#L71'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</em>
</body>
</html>
